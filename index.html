<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMARTFLOW | Hệ Thống Giao Thông AI & IoT</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #030508;
            --bg-panel: #0b101a;
            --primary: #00f0ff; /* Cyber Cyan */
            --secondary: #7000ff; /* Neon Purple */
            --accent: #ff0055; /* Cyber Pink */
            --text-main: #ffffff;
            --text-muted: #9ca3af;
            --glass: rgba(11, 16, 26, 0.7);
            --border-glow: 0 0 10px rgba(0, 240, 255, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3, .brand-font { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 1px; }
        .gradient-text {
            background: linear-gradient(90deg, #fff, var(--primary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* --- NAVBAR --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(3, 5, 8, 0.95); backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding: 10px 0;
            transition: all 0.3s ease;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        .navbar {
            display: flex; justify-content: space-between; align-items: center; 
            height: 90px; 
        }

        /* LOGO STYLING */
        .brand-container {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-img {
            height: 70px; 
            width: auto;
            border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.1);
            transition: 0.3s;
            background: #fff;
            padding: 3px;
        }

        .logo-text {
            font-size: 1.6rem; 
            font-weight: 900; 
            color: var(--text-main); 
            display: flex; 
            flex-direction: column;
            line-height: 1;
        }
        
        .logo-text span.main { font-family: 'Orbitron'; letter-spacing: 1px; }
        .logo-text span.sub { font-size: 0.75rem; color: var(--text-muted); font-weight: 400; letter-spacing: 2px; margin-top: 5px; }
        .logo-text .highlight { color: var(--primary); }

        .brand-container:hover .logo-img {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--primary);
            border-color: var(--primary);
        }

        /* Navigation Links */
        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links a {
            color: var(--text-muted); text-decoration: none; font-weight: 500; font-size: 0.95rem; transition: 0.3s;
            text-transform: uppercase; position: relative;
        }
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0;
            background: var(--primary); transition: 0.3s;
        }
        .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary); }

        .hamburger { display: none; font-size: 2rem; color: var(--text-main); cursor: pointer; transition: 0.3s; }
        .hamburger:hover { color: var(--primary); }

        /* --- HERO SECTION --- */
        .hero {
            padding-top: 160px; padding-bottom: 80px; min-height: 100vh;
            display: flex; align-items: center; position: relative; overflow: hidden;
        }
        .hero-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 80% 20%, #1a103c 0%, var(--bg-dark) 60%);
        }
        .hero-content { max-width: 650px; z-index: 2; padding-right: 20px; }
        .hero h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; }
        .hero p { font-size: 1.1rem; color: var(--text-muted); margin-bottom: 30px; border-left: 3px solid var(--secondary); padding-left: 20px; }
        
        .btn-main {
            padding: 14px 35px; background: var(--primary); color: #000; font-weight: 800;
            text-decoration: none; display: inline-block; border-radius: 5px;
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
            transition: 0.3s; margin-right: 15px; text-transform: uppercase;
        }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 0 30px var(--primary); background: #fff; }

        /* --- SECTIONS COMMON --- */
        .section-padding { padding: 100px 0; }
        .section-title { text-align: center; margin-bottom: 70px; }
        .section-title h2 { font-size: 2.8rem; margin-bottom: 15px; }
        .section-title span { color: var(--primary); font-size: 0.9rem; letter-spacing: 3px; text-transform: uppercase; font-weight: bold; }
        .section-title p { color: var(--text-muted); max-width: 600px; margin: 0 auto; font-size: 1.1rem; }

        /* --- TECH GRID --- */
        .tech-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;
        }
        .tech-card {
            background: var(--bg-panel); padding: 40px 30px; border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05); transition: 0.4s; position: relative; overflow: hidden;
        }
        .tech-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary)); opacity: 0; transition: 0.4s;
        }
        .tech-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.5); }
        .tech-card:hover::before { opacity: 1; }
        
        .tech-card i { font-size: 3rem; color: var(--text-main); margin-bottom: 25px; background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .tech-card h3 { margin-bottom: 15px; font-size: 1.4rem; color: var(--text-main); }
        .tech-card p { font-size: 1rem; color: var(--text-muted); line-height: 1.7; }

        /* --- PHILOSOPHY (Căn chỉnh bố cục Ngang) --- */
        .philosophy-container {
            display: flex; 
            gap: 50px; 
            align-items: center; 
            justify-content: space-between;
            margin-top: 50px;
            flex-direction: row; 
        }
        
        .philo-visual {
            width: 45%; 
            height: 450px; 
            background: #0b101a;
            border: 1px solid rgba(255,255,255,0.1); 
            position: relative; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            border-radius: 20px; 
            overflow: hidden;
            flex-shrink: 0; 
        }

        .circle {
            position: absolute; border: 1px solid var(--secondary); border-radius: 50%;
            animation: ripple 4s infinite linear;
        }
        @keyframes ripple { 0% { width: 0; height: 0; opacity: 1; border-width: 5px; } 100% { width: 400px; height: 400px; opacity: 0; border-width: 0px; } }

        .philo-content {
            width: 50%; 
            display: flex;
            flex-direction: column; 
        }

        .usp-list { padding: 0; margin: 0; }
        .usp-list li {
            list-style: none; margin-bottom: 25px; display: flex; gap: 20px;
            background: rgba(255,255,255,0.02); padding: 25px; border-radius: 15px; border: 1px solid transparent; transition: 0.3s;
            align-items: flex-start;
        }
        .usp-list li:hover { border-color: var(--primary); background: rgba(0, 240, 255, 0.05); transform: translateX(10px); }
        .usp-list i { color: var(--primary); font-size: 2rem; margin-top: 5px; flex-shrink: 0; }

        /* --- SIMULATOR --- */
        .sim-section { background: #000; border-top: 1px solid #111; border-bottom: 1px solid #111; }
        .sim-dashboard {
            background: #0e141f; border: 1px solid #333; border-radius: 20px; padding: 50px;
            max-width: 1000px; margin: 0 auto; display: flex; gap: 60px; flex-wrap: wrap;
            box-shadow: 0 0 80px rgba(0,0,0,0.6);
        }
        .sim-controls { flex: 1; min-width: 300px; }
        .sim-display { flex: 1; min-width: 300px; text-align: center; position: relative; }
        .sim-display::before { content: ''; position: absolute; left: -30px; top: 10%; height: 80%; width: 1px; background: #333; }

        input[type=range] { width: 100%; height: 6px; background: #333; border-radius: 5px; outline: none; -webkit-appearance: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 25px; height: 25px; border-radius: 50%; background: var(--primary); cursor: pointer; box-shadow: 0 0 15px var(--primary); transition: 0.2s; }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }

        .traffic-pole {
            background: #151515; width: 120px; padding: 20px; border-radius: 15px;
            margin: 0 auto 30px; display: flex; flex-direction: column; gap: 20px; border: 3px solid #333;
            box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
        }
        .bulb { width: 80px; height: 80px; background: #2a2a2a; border-radius: 50%; opacity: 0.2; transition: 0.2s; box-shadow: inset 0 0 20px #000; }
        .bulb.red.on { background: #ff0040; opacity: 1; box-shadow: 0 0 50px #ff0040; }
        .bulb.yellow.on { background: #ffea00; opacity: 1; box-shadow: 0 0 50px #ffea00; }
        .bulb.green.on { background: #00ffaa; opacity: 1; box-shadow: 0 0 50px #00ffaa; }

        .ai-scan-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            background: linear-gradient(180deg, rgba(0,240,255,0) 0%, rgba(0,240,255,0.1) 50%, rgba(0,240,255,0) 100%);
            background-size: 100% 200%; display: none;
            animation: scanMove 1.5s infinite linear; z-index: 10;
        }
        @keyframes scanMove { 0% { background-position: 0% -100%; } 100% { background-position: 0% 200%; } }

        /* --- FOOTER --- */
        footer { padding: 80px 0 30px; background: #020305; border-top: 1px solid #111; }
        .footer-content { display: flex; flex-wrap: wrap; gap: 40px; justify-content: space-between; }
        .footer-info h4 { color: var(--text-main); margin-bottom: 20px; font-family: 'Orbitron'; letter-spacing: 1px; }
        .footer-info ul { padding-left: 0; }
        .footer-info ul li { list-style: none; margin-bottom: 12px; color: var(--text-muted); display: flex; align-items: center; gap: 10px; }
        
        /* PDF Link Button Style */
        .pdf-link {
            display: inline-flex; align-items: center; gap: 10px;
            padding: 8px 15px; border: 1px solid var(--accent); border-radius: 5px;
            color: var(--accent); text-decoration: none; font-weight: bold; font-size: 0.85rem;
            transition: 0.3s;
        }
        .pdf-link:hover { background: var(--accent); color: #fff; box-shadow: 0 0 15px var(--accent); }

        /* --- MOBILE RESPONSIVE --- */
        @media (max-width: 992px) {
            .navbar { height: 70px; }
            .logo-img { height: 50px; } 
            .logo-text { font-size: 1.3rem; }
            
            .nav-links {
                position: fixed; top: 70px; right: -100%; width: 100%; height: calc(100vh - 70px);
                background: #000; flex-direction: column; align-items: center; justify-content: center;
                transition: 0.4s cubic-bezier(0.77, 0, 0.175, 1); z-index: 999;
            }
            .nav-links.active { right: 0; }
            .hamburger { display: block; }

            .hero { flex-direction: column; text-align: center; padding-top: 120px; padding-bottom: 50px; }
            .hero-content { padding-right: 0; margin-bottom: 40px;}
            .hero h1 { font-size: 2.5rem; }
            
            .philosophy-container { flex-direction: column; gap: 30px; }
            .philo-visual { width: 100%; height: 350px; }
            .philo-content { width: 100%; }
            
            .sim-dashboard { flex-direction: column; padding: 20px; }
            .sim-display::before { display: none; }
            .sim-display { border-left: none; border-top: 1px solid #333; padding-top: 40px; margin-top: 20px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container navbar">
            <a href="#" class="brand-container">
                <img src="image/logo.jpg" alt="CTech Logo" class="logo-img">
                <div class="logo-text">
                    <span class="main">SMART<span class="highlight">FLOW</span></span>
                    <span class="sub">POWERED BY CTECH</span>
                </div>
            </a>

            <ul class="nav-links" id="navLinks">
                <li><a href="#core">Công Nghệ</a></li>
                <li><a href="#usp">Ưu Điểm</a></li>
                <li><a href="#simulator">Mô Phỏng</a></li>
                <li><a href="#team">Liên Hệ</a></li>
            </ul>

            <div class="hamburger" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <section class="hero container">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <div style="color: var(--primary); font-weight: bold; margin-bottom: 15px; letter-spacing: 2px; display:inline-block; border: 1px solid var(--primary); padding: 5px 15px; border-radius: 20px;">
                <i class="fas fa-bolt"></i> CTECH INNOVATION
            </div>
            <h1>Giải pháp  <br><span class="gradient-text">AI và IOT cho giao thông</span></h1>
            <p>Hệ thống điều khiển tín hiệu thích ứng sử dụng AI Vision và IoT Edge. Giải pháp đột phá cho đô thị thông minh, giảm ùn tắc hiệu quả với chi phí tối thiểu.</p>
            <div style="margin-top: 35px;">
                <a href="#simulator" class="btn-main"><i class="fas fa-play"></i> Xem Demo</a>
                <a href="#core" style="color: var(--text-main); text-decoration: none; font-weight: 600; margin-left: 20px; transition: 0.3s;" onmouseover="this.style.color='#00f0ff'" onmouseout="this.style.color='#fff'">Tìm hiểu thêm <i class="fas fa-arrow-down"></i></a>
            </div>
        </div>
        <div style="flex: 1; display: flex; justify-content: center; position: relative;">
            <i class="fas fa-network-wired" style="font-size: 18rem; color: rgba(255,255,255,0.03); animation: pulse 3s infinite;"></i>
            <div style="position: absolute; top: 20%; right: 10%; width: 50px; height: 50px; background: var(--primary); filter: blur(40px); opacity: 0.5;"></div>
            <div style="position: absolute; bottom: 20%; left: 10%; width: 80px; height: 80px; background: var(--secondary); filter: blur(50px); opacity: 0.4;"></div>
        </div>
    </section>

    <section id="core" class="container section-padding">
        <div class="section-title">
            <span>CORE TECHNOLOGY</span>
            <h2>Công Nghệ Lõi</h2>
            <p>Sự kết hợp hoàn hảo giữa Phần cứng mạnh mẽ và Thuật toán thông minh.</p>
        </div>
        <div class="tech-grid">
            <div class="tech-card">
                <i class="fas fa-eye"></i>
                <h3>YOLOv8 Vision</h3>
                <p>Mắt thần AI xử lý hình ảnh thời gian thực, đếm chính xác số lượng xe và phân loại phương tiện bất kể ngày đêm hay thời tiết.</p>
            </div>
            <div class="tech-card">
                <i class="fas fa-brain"></i>
                <h3>RHODES Logic</h3>
                <p>Thuật toán tối ưu hóa phân cấp. Tự động tính toán thời gian xanh ($GT_{next}$) dựa trên mật độ xe thực tế thay vì chu kỳ cố định.</p>
            </div>
            <div class="tech-card">
                <i class="fas fa-wifi"></i>
                <h3>IoT Edge Control</h3>
                <p>Vi điều khiển ESP32 xử lý tại biên, đảm bảo hoạt động liên tục (Fail-safe) ngay cả khi mất kết nối máy chủ.</p>
            </div>
        </div>
    </section>

    <section id="usp" class="container section-padding">
        <div class="section-title">
            <span>WHY CHOOSE US?</span>
            <h2>Tại Sao Chọn <span style="color: var(--primary)">SMARTFLOW?</span></h2>
            <p>Chúng tôi mang đến giải pháp thực tế, tiết kiệm và hiệu quả tức thì.</p>
        </div>

        <div class="philosophy-container">
            <div class="philo-visual">
                <div class="circle" style="animation-delay: 0s;"></div>
                <div class="circle" style="animation-delay: 1.5s;"></div>
                <div class="circle" style="animation-delay: 3s;"></div>
                <i class="fas fa-shield-alt" style="font-size: 6rem; color: var(--text-main); z-index: 2; text-shadow: 0 0 30px rgba(255,255,255,0.2);"></i>
            </div>
            
            <div class="philo-content">
                <ul class="usp-list">
                    <li>
                        <i class="fas fa-coins"></i>
                        <div>
                            <strong style="font-size: 1.2rem; color: #fff;">Chi Phí Cực Thấp</strong>
                            [cite_start]<p style="font-size: 0.95rem; color: #888;">Chỉ ~50 triệu VNĐ/nút giao. Rẻ hơn 10 lần so với hệ thống ITS nhập khẩu nhờ tận dụng hạ tầng cũ [cite: 809-816].</p>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <strong style="font-size: 1.2rem; color: #fff;">Hiệu Quả Đã Kiểm Chứng</strong>
                            <p style="font-size: 0.95rem; color: #888;">Thực nghiệm tại TP. Huế cho thấy giảm tới <strong>34.2%</strong> lượng xe tồn đọng vào giờ cao điểm.</p>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-mobile-alt"></i>
                        <div>
                            <strong style="font-size: 1.2rem; color: #fff;">Điều Khiển Mọi Lúc</strong>
                            <p style="font-size: 0.95rem; color: #888;">Hệ thống Dashboard/App giúp CSGT giám sát và can thiệp thủ công từ xa khi cần thiết.</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <section id="simulator" class="sim-section section-padding">
        <div class="section-title">
            <span>LIVE DEMO</span>
            <h2>Mô Phỏng Thuật Toán AI</h2>
            <p>Trải nghiệm khả năng tự thích ứng của SmartFlow ngay trên trình duyệt.</p>
        </div>

        <div class="sim-dashboard">
            <div class="sim-controls">
                <div style="margin-bottom: 40px;">
                    <label style="display:block; margin-bottom: 15px; color: var(--primary); font-family: 'Orbitron'; letter-spacing: 1px;"><i class="fas fa-car"></i> MẬT ĐỘ XE (INPUT):</label>
                    <input type="range" id="carSlider" min="0" max="100" value="30" oninput="updateCarVal(this.value)">
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-family: monospace; color: #666;">
                        <span>0</span>
                        <span id="carValue" style="color: var(--text-main); font-size: 1.5rem; font-weight: bold;">30</span>
                        <span>100</span>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.03); padding: 25px; border-radius: 10px; font-size: 0.9rem; border: 1px solid rgba(255,255,255,0.05);">
                    [cite_start]<p style="color: var(--text-muted); margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px;">THÔNG SỐ CẤU HÌNH [cite: 284-289]:</p>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span>Ngưỡng thấp ($N_{min}$):</span> <span style="color: var(--primary)">5 xe</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span>Ngưỡng cao ($N_{max}$):</span> <span style="color: var(--accent)">50 xe</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Max Green ($GT_{max}$):</span> <span style="color: #fff;">50s</span>
                    </div>
                </div>

                <button onclick="runSim()" class="btn-main" style="width: 100%; margin-top: 30px; text-align: center; cursor: pointer; border: none;">
                    <i class="fas fa-bolt"></i> CHẠY XỬ LÝ AI
                </button>
            </div>

            <div class="sim-display">
                <div class="ai-scan-overlay" id="aiScan"></div>
                <div id="aiStatus" style="font-family: 'Courier New', monospace; color: var(--primary); margin-bottom: 25px; min-height: 24px; font-weight: bold;">> HỆ THỐNG SẴN SÀNG</div>
                <div class="traffic-pole">
                    <div class="bulb red" id="l-red"></div>
                    <div class="bulb yellow" id="l-yellow"></div>
                    <div class="bulb green" id="l-green"></div>
                </div>
                <div style="margin-top: 30px;">
                    <span style="color: #666; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px;">Thời gian xanh dự kiến</span>
                    <h1 id="timer" style="font-size: 5rem; color: var(--text-main); font-family: 'Orbitron'; line-height: 1; text-shadow: 0 0 20px rgba(255,255,255,0.2);">--</h1>
                </div>
            </div>
        </div>
    </section>

    <footer id="team">
        <div class="container">
            <div class="footer-content">
                <div style="flex: 1.5; min-width: 300px;">
                    <a href="#" class="brand-container" style="margin-bottom: 20px; display: inline-flex;">
                        <img src="image/logo.jpg" alt="Logo" style="height: 40px; border-radius: 5px;">
                        <span style="font-size: 1.2rem; font-weight: 900; color: #fff; margin-left: 10px; align-self: center;">SMARTFLOW</span>
                    </a>
                    <p style="color: #777; line-height: 1.8;">Dự án đạt giải Khoa học Kỹ thuật cấp Thành phố (2025-2026).<br>Giải pháp tiên phong cho hạ tầng giao thông thông minh bền vững.</p>
                </div>

                <div class="footer-info" style="flex: 1; min-width: 250px;">
                    <h4>NHÓM TÁC GIẢ</h4>
                    <ul>
                        <li><i class="fas fa-user-circle"></i> Đinh Xuân Trường (12/3)</li>
                        <li><i class="fas fa-user-circle"></i> Nguyễn Nhất Nguyên (12/3)</li>
                        <li><i class="fas fa-user-circle"></i> Lê Văn Quốc Hùng (12/8)</li>
                        <li><i class="fas fa-user-circle"></i> Lê Quang Thành (11/3)</li>
                        <li><i class="fas fa-user-circle"></i> Phạm Bảo Minh Hân (10/8)</li>
                        <li style="margin-top: 10px; font-size: 0.85rem;"><i class="fas fa-school"></i> THPT Cao Thắng - TP. Huế</li>
                    </ul>
                </div>

                <div class="footer-info" style="flex: 1; min-width: 250px;">
                    <h4>HƯỚNG DẪN & PHÁP LÝ</h4>
                    <ul>
                        <li><i class="fas fa-chalkboard-teacher" style="color: var(--secondary)"></i> ThS. Nguyễn Thị Lan Anh</li>
                        <li style="margin-top: 15px;">
                            <a href="pdf/phieu_xac_nhan.pdf" target="_blank" class="pdf-link">
                                <i class="fas fa-file-contract"></i> Xem Phiếu Xác Nhận
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div style="text-align: center; margin-top: 60px; padding-top: 20px; border-top: 1px solid #1a1a1a; font-size: 0.8rem; color: #444;">
                &copy; 2026 CTech Innovation Team. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        function toggleMenu() { document.querySelector('.nav-links').classList.toggle('active'); }
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => { document.querySelector('.nav-links').classList.remove('active'); });
        });
        function updateCarVal(val) { document.getElementById('carValue').innerText = val; }

        const GT_MIN = 15, GT_MAX = 50, N_MIN = 5, N_MAX = 50;
        let simInterval;

        function runSim() {
            const n = parseInt(document.getElementById('carSlider').value);
            const status = document.getElementById('aiStatus');
            const scanOverlay = document.getElementById('aiScan');
            const timerDisplay = document.getElementById('timer');
            const btn = document.querySelector('.btn-main');
            
            document.getElementById('l-red').classList.remove('on');
            document.getElementById('l-yellow').classList.remove('on');
            document.getElementById('l-green').classList.remove('on');
            clearInterval(simInterval);
            timerDisplay.innerText = "--";
            btn.disabled = true; btn.style.opacity = "0.5";

            status.innerText = "> ĐANG QUÉT & PHÂN TÍCH DỮ LIỆU...";
            scanOverlay.style.display = "block";

            setTimeout(() => {
                scanOverlay.style.display = "none";
                let gtNext = 0;
                if (n <= N_MIN) gtNext = GT_MIN;
                else if (n >= N_MAX) gtNext = GT_MAX;
                else gtNext = GT_MIN + ((n - N_MIN) / (N_MAX - N_MIN)) * (GT_MAX - GT_MIN);
                gtNext = Math.round(gtNext);
                status.innerHTML = `> KẾT QUẢ: <span style="color:#fff">N=${n}</span> → GREEN TIME: <span style="color:var(--primary)">${gtNext}s</span>`;
                runGreen(gtNext);
                btn.disabled = false; btn.style.opacity = "1";
            }, 1500);
        }

        function runGreen(time) {
            const green = document.getElementById('l-green');
            const timer = document.getElementById('timer');
            green.classList.add('on');
            let t = time; timer.innerText = t;
            simInterval = setInterval(() => {
                t--; timer.innerText = t;
                if(t <= 0) { clearInterval(simInterval); runYellow(); }
            }, 100);
        }

        function runYellow() {
            document.getElementById('l-green').classList.remove('on');
            document.getElementById('l-yellow').classList.add('on');
            document.getElementById('timer').innerText = "3";
            document.getElementById('aiStatus').innerText = "> CHUYỂN PHA: VÀNG (GIẢM TỐC)";
            setTimeout(() => {
                document.getElementById('l-yellow').classList.remove('on');
                document.getElementById('l-red').classList.add('on');
                document.getElementById('timer').innerText = "--";
                document.getElementById('aiStatus').innerText = "> CHUYỂN PHA: ĐỎ (DỪNG)";
            }, 1000);
        }
    </script>
</body>
</html>